# 存储管理

## 用户程序的处理过程

+ 处理过程：
   1. 编译：源代码——目标代码（.obj文件）
   2. 链接：目标代码 + 所需库函数 = 装入模块（.exe文件）
   3. 装入：将装入模块装入内存，该过程也叫地址重定位，也称地址映射

+ 地址空间
+ 存储空间

### 程序的装入方式

+ 重定位：把用户程序中的相对地址（逻辑地址）转换为主存中的绝对地址
+ 静态重定位
+ 动态重定位

### 程序的连接方式

+ 静态链接
    1. 对相对地址进行修改
    2. 交换外部调用符号
+ 装入时动态链接
    1. 便于软件版本更新和修改
    2. 便于实现目标模块的共享
+ 运行时动态链接

## 连续分配存储管理方式

+ 连续分配
    1. 单一连续分配
        1. 特点：适用于单用户、单任务操作系统；容易记住用户状态 
    2. 固定分区分配
        1. 方法：分区在系统启动后划分，以后不能改变
        2. 划分方式：分区大小相等；分区大小不等
        3. 缺点：内存利用率不高 
    3. 可变分区分配
        1. 动态分区分配数据结构
            1. 空闲分区表
            2. 空闲分区链
        2. 算法
            1. 首次适应法
                1. 条件：空闲分区链以存储空间地址递增的次序链接
                2. 优点：速度快；保证高地址空闲空间，可留给大作业
                3. 缺点：容易产生碎片，影响分配速度
            2. 下次适应法
                1. 条件：空闲分区链以存储空间地址递增的次序链接成循环链表，从上次找到的空闲空间的下一个空闲分区开始找
                2. 优点：空间利用均匀
                3. 缺点：没有较大的空闲空间，使大作业无法运行
            3. 最佳适应法
                1. 条件：空闲分区链以存储空间大小递增的次序链接
                2. 优点：可以避免销掉更大的空间
                3. 缺点：碎片问题严重；空间回收问题严重
            4. 最坏适应法
                1. 条件：空闲分区链以存储空间大小递减的次序链接
                2. 优点：查找容易，速度快
                3. 缺点：大作业无空间可用
+ 内存回收
    1. 可变分区内存的回收
        1. 回收分区与前面一个（低地址）空闲空间相连
        2. 回收分区与后面一个（高地址）空闲空间
